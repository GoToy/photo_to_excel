<p id="notice"><%= notice %></p>

<p>
<strong>Photo:</strong>
<%= @post.photo %>
<% if @post.photo %>
  <%= image_tag @post.photo.url, class: "img-thumbnail" %>
     <canvas id="check_errors" width, height = gon.width >
     </canvas>
<script type="application/javascript">
 function init(){
    // 画像の表示イベント
    var img = new Image();
    img.src = gon.photo_url;
    img.onload = function(){
        // 画像を表示
        ctx.drawImage(img,0,0,0,0,0,0,0,0);
        
    }
}

// 実行をセット
var ctx;
document.body.onload = function(){

    ctx = document.querySelector("#check_errors").getContext("2d");

    init();

}
  </script>
  <table class="table">
    <tr>
      <th class="text-center">x</th>
      <th class="text-center">y</th>
      <th class="text-center">w</th>
      <th class="text-center">h</th>
      <th class="text-center">number</th>
      <th class="text-center">link</th>
    </tr>
    <% @num_array.each do |num| %>
      <tr>
        <td><%= num[:x] %></td>
        <td><%= num[:y] %></td>
        <td><%= num[:w] %></td>
        <td><%= num[:h] %></td>
        <td><%= num[:string] %></td>
        <td><%= link_to "link", show_target_image_post_path(@post, x: num[:x], y: num[:y], w: num[:w], h: num[:h], num: num[:string]) %></td>
      </tr>
    <% end %>
  </table>
<% else %>
  <%= image_tag 'noimage.gif', class: "img-thumbnail" %>
<% end %>
</p>
<%= link_to 'Back', posts_path %>
